(()=>{"use strict";var e={265:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){s.languages.registerFoldingRangeProvider({language:"json"},new l);const t=s.window.createTextEditorDecorationType({after:{margin:"0 0 0 0em",color:"gray"}}),n=e=>{e&&"json"===e.document.languageId&&c(e,t)};e.subscriptions.push(s.window.onDidChangeActiveTextEditor((e=>{n(e)}))),e.subscriptions.push(s.window.onDidChangeTextEditorVisibleRanges((e=>{n(e.textEditor)}))),e.subscriptions.push(s.workspace.onDidChangeTextDocument((e=>{const n=s.window.activeTextEditor;n&&e.document===n.document&&"json"===n.document.languageId&&c(n,t)}))),n(s.window.activeTextEditor)},t.deactivate=function(){};const s=r(n(398));class l{provideFoldingRanges(e,t,n){const o=[],i=[];for(let t=0;t<e.lineCount;t++){const n=e.lineAt(t).text.trim();if(n.endsWith("{")||n.endsWith("["))i.push(t);else if(n.endsWith("}")||n.endsWith("]")){const e=i.pop();void 0!==e&&o.push(new s.FoldingRange(e,t,s.FoldingRangeKind.Region))}}return o}}function c(e,t){const n=e.document,o=[];e.visibleRanges.forEach((t=>{for(let i=t.start.line;i<=t.end.line;i++){console.log("\nlog..=========================");const t=n.lineAt(i),r=t.text.trim();if(console.log(`log..text @ ${i+1}: ${r}`),r.endsWith("{")||r.endsWith("[")){console.log(`log..getFirstKeyValuePreview for startline ${i+1}`);const r=u(n,i);console.log(`log..preview: ${r}`);const l=i,c=a(e,l+1);if(console.log(`folded State AT ${l+1} is ${c?"folded":"not folded"}`),c){const e={range:new s.Range(i,t.range.end.character,i,t.range.end.character),renderOptions:{after:{contentText:r}}};o.push(e)}}}})),e.setDecorations(t,o)}function a(e,t){for(const n of e.visibleRanges)if(t>=n.start.line&&t<=n.end.line)return!1;return!0}function u(e,t){let n="",o=0,i=!1;for(let r=t;r<e.lineCount;r++){const t=e.lineAt(r).text.trim();if(t.endsWith("{")||t.endsWith("[")?o++:(t.endsWith("}")||t.endsWith("]"))&&o--,!i&&t.includes(":")){const o=t.split(":").map((e=>e.trim()));o.length>=2&&(n=`${d(o[1],e,r)}`,console.log(`log..initial preview: ${n}`),n.includes("...]")||n.includes("...}")||(n=`${o[0]}: ${n}`),i=!0)}if(0===o)break}return console.log(`log...getFirstKeyValuePreview: ${n}`),n.length>50?n.substring(0,47)+"...":n}function d(e,t,n){console.log(`log..Value: ${e}`);try{const t=JSON.parse(e);if(console.log(`log..parsedValue ${t}`),"object"==typeof t&&null!==t){const e=Object.keys(t)[0];return`${e}: ${JSON.stringify(t[e])}`}}catch(e){console.log(`log..Error ${e}`)}return"{"!==e||t.lineAt(n+1).text.trim().includes("{")?"{"===e?"...}":"["===e?"...]":e:`${t.lineAt(n+1).text.trim()}...}`}},398:e=>{e.exports=require("vscode")}},t={},n=function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(265);module.exports=n})();