(()=>{"use strict";var e={265:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){s.languages.registerFoldingRangeProvider({language:"json"},new u);const t=s.window.createTextEditorDecorationType({after:{margin:"0 0 0 0em",color:"gray"}}),n=e=>{e&&"json"===e.document.languageId&&d(e,t)};e.subscriptions.push(s.window.onDidChangeActiveTextEditor((e=>{n(e)}))),e.subscriptions.push(s.window.onDidChangeTextEditorVisibleRanges((e=>{n(e.textEditor)}))),e.subscriptions.push(s.workspace.onDidChangeTextDocument((e=>{const n=s.window.activeTextEditor;n&&e.document===n.document&&"json"===n.document.languageId&&d(n,t)}))),n(s.window.activeTextEditor)},t.deactivate=function(){};const s=r(n(398));let c,a=[],l=[];class u{provideFoldingRanges(e,t,n){const i=[],o=[];for(let t=0;t<e.lineCount;t++){const n=e.lineAt(t).text.trim();if(n.endsWith("{")||n.endsWith("["))o.push(t);else if(n.endsWith("}")||n.endsWith("]")){const e=o.pop();void 0!==e&&i.push(new s.FoldingRange(e,t,s.FoldingRangeKind.Region))}}return i}}function d(e,t){const n=e.document,i=[];e.visibleRanges.forEach((t=>{for(let o=t.start.line;o<=t.end.line;o++){const t=n.lineAt(o),r=t.text.trim(),c=o;if(r.endsWith("{")||r.endsWith("[")){const r=h(n,o);if(p(e,c+1)){const e={range:new s.Range(o,t.range.end.character,o,t.range.end.character),renderOptions:{after:{contentText:r}}};i.push(e)}}"}"!==r&&"},"!==r&&"]"!==r&&"],"!==r||p(e,c-1)&&(f(e,c),l.push(c)),l.includes(c)&&(p(e,c-1)||(console.log(`Need to unhide this line(${c+1})!`),g(e,c)))}})),e.setDecorations(t,i)}function g(e,t){c&&(a=a.filter((e=>e.start.line!==t)),e.setDecorations(c,a),0===a.length&&(c.dispose(),c=void 0))}function f(e,t){c||(c=s.window.createTextEditorDecorationType({textDecoration:"none; opacity: 0.15;"}));const n=new s.Range(new s.Position(t,0),new s.Position(t,e.document.lineAt(t).text.length));a.push(n),e.setDecorations(c,a)}function p(e,t){for(const n of e.visibleRanges)if(t>=n.start.line&&t<=n.end.line)return!1;return!0}function h(e,t){let n="",i=0,o=!1;for(let r=t;r<e.lineCount;r++){const t=e.lineAt(r).text.trim();if(t.endsWith("{")||t.endsWith("[")?i++:(t.endsWith("}")||t.endsWith("]"))&&i--,!o&&t.includes(":")){const i=t.split(":").map((e=>e.trim()));i.length>=2&&(n=`${v(i[1],e,r)}`,console.log(`log..initial preview: ${n}`),n.includes("...]")||n.includes("...}")||(n=`${i[0]}: ${n}`),o=!0)}if(0===i)break}return console.log(`log...getFirstKeyValuePreview: ${n}`),n.length>50?n.substring(0,47)+"...":n}function v(e,t,n){try{const t=JSON.parse(e);if("object"==typeof t&&null!==t){const e=Object.keys(t)[0];return`${e}: ${JSON.stringify(t[e])}`}}catch(e){}return"{"!==e||t.lineAt(n+1).text.trim().includes("{")?"{"===e?"...}":"["===e?"...]":e:`${t.lineAt(n+1).text.trim()}...}`}},398:e=>{e.exports=require("vscode")}},t={},n=function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(265);module.exports=n})();