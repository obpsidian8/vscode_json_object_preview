{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://json-object-preview/./src/extension.ts","webpack://json-object-preview/external commonjs \"vscode\"","webpack://json-object-preview/webpack/bootstrap","webpack://json-object-preview/webpack/startup"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.activate = activate;\nexports.deactivate = deactivate;\nconst vscode = __importStar(require(\"vscode\"));\nfunction activate(context) {\n    vscode.languages.registerFoldingRangeProvider({ language: 'json' }, new JsonFoldingRangeProvider());\n    const decorationType = vscode.window.createTextEditorDecorationType({\n        after: {\n            margin: '0 0 0 0em',\n            color: 'gray'\n        }\n    });\n    const updateDecorationsForEditor = (editor) => {\n        if (editor && editor.document.languageId === 'json') {\n            updateDecorations(editor, decorationType);\n        }\n    };\n    context.subscriptions.push(vscode.window.onDidChangeActiveTextEditor(editor => {\n        updateDecorationsForEditor(editor);\n    }));\n    context.subscriptions.push(vscode.window.onDidChangeTextEditorVisibleRanges(event => {\n        updateDecorationsForEditor(event.textEditor);\n    }));\n    context.subscriptions.push(vscode.workspace.onDidChangeTextDocument(event => {\n        const editor = vscode.window.activeTextEditor;\n        if (editor && event.document === editor.document && editor.document.languageId === 'json') {\n            updateDecorations(editor, decorationType);\n        }\n    }));\n    // Apply decorations to the active editor when the extension is activated\n    updateDecorationsForEditor(vscode.window.activeTextEditor);\n}\nclass JsonFoldingRangeProvider {\n    provideFoldingRanges(document, context, token) {\n        const ranges = [];\n        const stack = [];\n        for (let i = 0; i < document.lineCount; i++) {\n            const line = document.lineAt(i);\n            const text = line.text.trim();\n            if (text.endsWith('{') || text.endsWith('[')) {\n                stack.push(i);\n            }\n            else if (text.endsWith('}') || text.endsWith(']')) {\n                const start = stack.pop();\n                if (start !== undefined) {\n                    ranges.push(new vscode.FoldingRange(start, i, vscode.FoldingRangeKind.Region));\n                }\n            }\n        }\n        return ranges;\n    }\n}\nfunction updateDecorations(editor, decorationType) {\n    const document = editor.document;\n    const decorations = [];\n    const foldingRanges = editor.visibleRanges;\n    foldingRanges.forEach(range => {\n        for (let i = range.start.line; i <= range.end.line; i++) {\n            console.log(`\\nlog..=========================`);\n            const line = document.lineAt(i);\n            const text = line.text.trim();\n            console.log(`log..text @ ${i + 1}: ${text}`);\n            if (text.endsWith('{') || text.endsWith('[')) {\n                console.log(`log..getFirstKeyValuePreview for startline ${i + 1}`);\n                const preview = getFirstKeyValuePreview(document, i);\n                console.log(`log..preview: ${preview}`);\n                const lineToCheck = i;\n                const collapsed = isLineCollapsed(editor, lineToCheck);\n                console.log(`Collapsed State: ${lineToCheck + 1} is ${collapsed ? 'collapsed' : 'not collapsed'}`);\n                const decoration = { range: new vscode.Range(i, line.range.end.character, i, line.range.end.character), renderOptions: { after: { contentText: preview } } };\n                decorations.push(decoration);\n            }\n        }\n    });\n    editor.setDecorations(decorationType, decorations);\n}\nfunction isLineCollapsed(editor, line) {\n    const document = editor.document;\n    const text = document.lineAt(line).text.trim();\n    console.log(`LOG..Text at line: ${line}:${text} `);\n    return false;\n}\nfunction getFirstKeyValuePreview(document, startLine) {\n    let preview = '';\n    let depth = 0;\n    let firstKeyValueFound = false;\n    for (let i = startLine; i < document.lineCount; i++) {\n        const line = document.lineAt(i);\n        const text = line.text.trim();\n        if (text.endsWith('{') || text.endsWith('[')) {\n            depth++;\n        }\n        else if (text.endsWith('}') || text.endsWith(']')) {\n            depth--;\n        }\n        if (!firstKeyValueFound && text.includes(':')) {\n            const keyValue = text.split(':').map(part => part.trim());\n            if (keyValue.length >= 2) {\n                preview = `${getFirstValuePreview(keyValue[1], document, i)}`;\n                console.log(`log..initial preview: ${preview}`);\n                if (!preview.includes('...]') && !preview.includes('...}')) {\n                    preview = `${keyValue[0]}: ${preview}`;\n                }\n                firstKeyValueFound = true;\n            }\n        }\n        if (depth === 0) {\n            break;\n        }\n    }\n    console.log(`log...getFirstKeyValuePreview: ${preview}`);\n    return preview.length > 50 ? preview.substring(0, 47) + '...' : preview;\n}\nfunction getFirstValuePreview(value, document, lineNum) {\n    console.log(`log..Value: ${value}`);\n    try {\n        const parsedValue = JSON.parse(value);\n        console.log(`log..parsedValue ${parsedValue}`);\n        if (typeof parsedValue === 'object' && parsedValue !== null) {\n            const firstKey = Object.keys(parsedValue)[0];\n            return `${firstKey}: ${JSON.stringify(parsedValue[firstKey])}`;\n        }\n    }\n    catch (e) {\n        console.log(`log..Error ${e}`);\n        // If parsing fails, return the value as is\n    }\n    if (value === '{' && !document.lineAt(lineNum + 1).text.trim().includes('{')) { // Also need to check the next two lines\n        return `${document.lineAt(lineNum + 1).text.trim()}...}`;\n    }\n    if (value === '{') { // Also need to check the next two lines\n        return `...}`;\n    }\n    if (value === '[') {\n        return `...]`;\n    }\n    return value;\n}\nfunction deactivate() { }\n","module.exports = require(\"vscode\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(265);\n"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__setModuleDefault","v","value","__importStar","mod","result","prototype","hasOwnProperty","call","exports","activate","context","vscode","languages","registerFoldingRangeProvider","language","JsonFoldingRangeProvider","decorationType","window","createTextEditorDecorationType","after","margin","color","updateDecorationsForEditor","editor","document","languageId","updateDecorations","subscriptions","push","onDidChangeActiveTextEditor","onDidChangeTextEditorVisibleRanges","event","textEditor","workspace","onDidChangeTextDocument","activeTextEditor","deactivate","provideFoldingRanges","token","ranges","stack","i","lineCount","text","lineAt","trim","endsWith","start","pop","FoldingRange","FoldingRangeKind","Region","decorations","visibleRanges","forEach","range","line","end","console","log","preview","getFirstKeyValuePreview","lineToCheck","collapsed","isLineCollapsed","decoration","Range","character","renderOptions","contentText","setDecorations","startLine","depth","firstKeyValueFound","includes","keyValue","split","map","part","length","getFirstValuePreview","substring","lineNum","parsedValue","JSON","parse","firstKey","keys","stringify","e","module","require","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"sourceRoot":""}